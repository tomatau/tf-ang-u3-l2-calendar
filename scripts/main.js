angular.module("Calendar",[]),angular.module("Models",[]),angular.module("myApp",["Calendar","Models"]).run(["calendarRange","CurrentRange",function(e,t){var r=new Date;t.set(r,e.getMonthlyRange(r))}]),angular.module("Calendar").factory("calendarRange",function(){"use strict";var e=864e5;return{prepareDate:function(e){var e=new Date(e),t=e.getDay();return{date:e,weekday:0!=t&&6!=t,day:e.getDate(),month:e.getMonth(),year:e.getFullYear()}},getMonthlyRange:function(t){var r,n,a,u,o=t.getMonth(),l=new Date(t),c=[];for(l.setDate(1),r=new Date(l),r.getDay()>0&&r.setTime(r.getTime()-r.getDay()*e),n=new Date(l),11==o?(n.setMonth(0),n.setYear(n.getFullYear()+1)):n.setMonth(o+1),n.setTime(n.getTime()-e),a=new Date(n),a.setTime(a.getTime()+(6-n.getDay())*e),u=new Date(r);a>=u;)c.push(this.prepareDate(u)),u.setTime(u.getTime()+e);return{first:r,start:l,end:n,last:a,days:c}}}}),angular.module("Models").factory("CurrentRange",function(){"use strict";var e={};return{currentDateOb:null,set:function(e,t){this.currentDateOb=e,angular.extend(this.reset(),t)},get:function(){return e},reset:function(){for(var t in e)delete e[t];return e}}}),angular.module("Calendar").constant("CAL_DIR","./scripts/drctv/").directive("calendarDisplay",["CAL_DIR","CurrentRange",function(e,t){"use strict";function r(e){return e.toDateString().split(" ")[0]}function n(e){for(var t,n=[],u=[],l=0;l<e.length;l++)t=e[l],u.push({dayName:t.day,day:t.date.getDay(),weekday:r(t.date),isCurrentMonth:a.getMonth()==t.date.getMonth()}),(l+1)%o.length===0&&(n.push(u),u=[]);return n}var a=t.currentDateOb,u=t.get(),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return{restrict:"E",templateUrl:e+"cal.tmpl.html",controller:["$scope",function(e){e.$watch(function(){return u},function(r,u){return r===u?!1:(a=t.currentDateOb,void(e.weeks=n(r.days)))},!0),e.weeks=n(u.days)}]}}]).directive("calendarControl",["CAL_DIR","CurrentRange","calendarRange",function(e,t,r){"use strict";function n(e){for(var t=o-(e||l),r=0,n=2*(e||l),a=[];n>=r;r++)a.push(t+r);return a}function a(){var e=new Date(o,u);t.set(e,r.getMonthlyRange(e))}var u=t.currentDateOb.getMonth(),o=t.currentDateOb.getFullYear(),l=20,c=["January","February","March","April","May","June","July","August","September","October","November","December"];return{restrict:"E",templateUrl:e+"control.tmpl.html",controller:["$scope",function(e){e.updateMonth=function(t){e.currentMonth=u=t,a()},e.updateYear=function(t){e.currentYear=o=t,a()},e.currentMonth=u,e.currentYear=o,e.months=c,e.years=n()}]}}]);